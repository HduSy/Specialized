Created Date：2024-01-02 18:58:06  
Last Modified：2024-01-02 18:58:06

# Tags

# Content

## 2.1 提升用户的开发体验

开发环境为用户提供友好警告信息的同时，不增加生产环境代码体积

## 2.2 框架要做到良好的 Tree-Shaking

**Tree-Shaking** 指的就是消除那些永远不会被执行的代码，也就是排除 **dead code**，现在无论是 `Rollup` 还是 `webpack`，都支持 `Tree-Shaking`，须满足条件：

1. 即模块必须是 ` ESM（ES Module）`，因为 `Tree-Shaking` 依赖 `ESM` 的静态结构
2. `副作用`，==如果一个函数调用会产生副作用，那么就不能将其移除==。（副作用。如果一个函数调用会产生副作用，那么就不能将其移除，是一个==很宽泛的概念==，例如修改了全局变量）

### 手动告知非副作用代码

```js
/*#__PURE__*/
```

## 2.3 框架应该输出怎样的构建产物

根据使用场景的不同，输出不同形式的产物，`IIFE`、`ESM`、`CJS`

```js
// iife
(function () { 
	// … 
}())
```

```html
// esm
<script type="module" src="/path/to/vue.esm-browser.js"></script>
```

```js
// commonjs
const vue = require('vue')
```

## 2.5 特性开关机制

- 对于用户关闭的特性，利用 `Tree-Shaking` 使其不包含在最终代码中，减小打包后资源体积；
- 该机制为框架设计带来了灵活性，通过特性开关任意为框架添加新特性而不用担心框架体积变大，也可以通过特性开关支持遗留 API

## 2.6 错误处理

框架错误处理的好坏直接决定了用户应用程序的**健壮性**，还决定了用户开发时**处理错误的心智负担**。为用户提供统一的错误处理接口，代码简洁。

## 2.7 良好的 TypeScript 类型支持

> 使用 TS 编写代码与对 TS 类型支持友好是两件事。

### 好处

代码即文档、编辑器自动提示、避免低级别 `bug`、提高代码可维护性。

## 总结

> 开发体验是衡量一个框架的重要指标之一。

# Reference
