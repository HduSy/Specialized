Created Date：2024-01-18 13:20:38  
Last Modified：2024-01-18 13:20:37

# Tags

# Content

## 1.1 生成 HTTP 请求消息

**浏览器**能够解析网址并生成 `HTTP` 消息

### 1.1.5 生成 HTTP 请求消息

消息的格式如下，浏览器和服务器会根据此格式生成消息：  
![[Pasted image 20240118132213.png]]  

`URI` 部分一般是文件和程序的路径名；  
`HTTP版本号` 为了表示该消息是基于哪个版本的 `HTTP` 规格编写的；  
`消息头` 补充额外的详细信息，常见消息头：  
![[Pasted image 20240118132813.png]]  
![[Pasted image 20240118132959.png]]  
`消息体` 的格式会通过消息头中的 `Content-Type` 字段来定义；  

### 1.1.6 发送请求后收到响应

## 1.2 向 DNS 服务器查询 Web 服务器的 IP 地址

浏览器不具备将消息发送到网络中的功能，这一功能需要委托**操作系统**来实现，须为 `OS` 提供服务器 `IP` 地址而不是服务器域名。原来浏览器解析地址生成 `HTTP` 消息是第一步，下一步才去 `DNS` 查域名对应 `IP` 地址

### 1.2.1 IP 地址的基本知识

#### 网络

小的子网由集线器和与其连接计算机的构成，子网通过路由器连接形成大的网络  

#### `IP`

网络上所有的设备都会被分配一个地址，类比于“xx 号 xx 室”，“号”对应**网络号**，“室”对应主机号，这个地址的整体称为 `IP地址`  

#### `IPv4` 构成

32bit 的数字，分为 4 组 8bit，分别十进制标识并以 `.` 隔开  

#### 子网掩码

`IP` 地址网络号和主机号部分是用户自行分配的，为标识 `IP` 地址内部结构，附加信息子网掩码就是干这个事儿的  
![[Pasted image 20240118135822.png]]  
子网掩码为 1 的部分表示网络号，子网掩码为 0 的部分表示主机号

```ad-info
主机号部分全部为 0 代表**整个子网**而不是子网中的某台设备。此外，主机号部分全部为 1 代表向子网上所有设备发送包，即**广播**
```

### 1.2.2　域名和 IP 地址并用的理由

人方便记忆，机器方便查询且 `32bit=8byte` 保证传输效率

### 1.2.3 Socket 提供查询 IP 地址的功能

通过 `DNS` 查询域名对应 `IP` 地址的操作称为域名解析，执行解析的客户端软件叫做**DNS 解析器**，它实际上是操作系统中 `Socket` 库中的一段程序

### 1.2.4 通过解析器向 DNS 服务器发出查询

应用程序（浏览器）调用 `Socket` 库中解析器的方法，向 `DNS` 服务器发出查询，查询结果也就是 `IP` 地址将由解析器写入浏览器指定内存地址中。这个过程当然需要知道 `DNS` 服务器地址，其 `IP` 是预先设置好的，不需要再去查询  

![[Pasted image 20240122102129.png]]

### 1.2.5 解析器的内部原理

![[Pasted image 20240122101640.png]]  

发送消息这个操作并不是由解析器自身来执行，而是要**委托给操作系统内部的协议栈**来执行。这是因为和浏览器一样，解析器本身也不具备使用网络收发数据的功能

## 1.3 全世界 DNS 服务器的大接力

# Reference
