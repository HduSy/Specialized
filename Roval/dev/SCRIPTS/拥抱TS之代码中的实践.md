# æ ‡ç­¾

#æ˜é‡‘

# ç›®å½•

- [[#æ­£æ–‡|æ­£æ–‡]]
	- [[#æ‘˜è¦|æ‘˜è¦]]
		- [[#1ã€å–„ç”¨ç±»å‹æ³¨é‡Š|1ã€å–„ç”¨ç±»å‹æ³¨é‡Š]]
		- [[#2ã€å–„ç”¨*.d.tså£°æ˜æ–‡ä»¶|2ã€å–„ç”¨*.d.tså£°æ˜æ–‡ä»¶]]
		- [[#3ã€ç¬¬ä¸‰æ–¹åº“å£°æ˜æ–‡ä»¶|3ã€ç¬¬ä¸‰æ–¹åº“å£°æ˜æ–‡ä»¶]]
		- [[#4ã€è‡ªå®šä¹‰å£°æ˜æ–‡ä»¶|4ã€è‡ªå®šä¹‰å£°æ˜æ–‡ä»¶]]
		- [[#5ã€å‘½åç©ºé—´ - namespace|5ã€å‘½åç©ºé—´ - namespace]]
		- [[#6ã€å–„ç”¨JSæ–°ç‰¹æ€§ - å¯é€‰é“¾|6ã€å–„ç”¨JSæ–°ç‰¹æ€§ - å¯é€‰é“¾]]
		- [[#7ã€å–„ç”¨JSæ–°ç‰¹æ€§ - ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦|7ã€å–„ç”¨JSæ–°ç‰¹æ€§ - ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦]]
		- [[#8ã€å–„ç”¨ä½¿ç”¨è®¿é—®é™å®šä¿®é¥°ç¬¦ - `private`ã€`protected` å’Œ `public`|8ã€å–„ç”¨ä½¿ç”¨è®¿é—®é™å®šä¿®é¥°ç¬¦ - `private`ã€`protected` å’Œ `public`]]
		- [[#9ã€å–„ç”¨ç±»å‹æ”¶çª„|9ã€å–„ç”¨ç±»å‹æ”¶çª„]]
		- [[#10ã€å¸¸é‡æšä¸¾vsæ™®é€šæšä¸¾|10ã€å¸¸é‡æšä¸¾vsæ™®é€šæšä¸¾]]
		- [[#11ã€é«˜çº§ç±»å‹|11ã€é«˜çº§ç±»å‹]]
- [[#å‚è€ƒæ–‡çŒ®|å‚è€ƒæ–‡çŒ®]]

åˆ›å»ºæ—¥æœŸï¼š2022-02-19 21:52:07  
æœ€åä¿®æ”¹ï¼š2022-02-19 21:52:07

- - -
> Beware of false knowledge; it is more dangerous than ignorance.  
>â€”<cite>Bernard Shaw</cite>

# æ­£æ–‡

## æ‘˜è¦

`TypeScript` å¢å¼ºäº† IDE åŠŸèƒ½ï¼Œæ›´å¥½çš„ä»£ç æç¤ºã€å®šä¹‰è·³è½¬ã€æ¥å£æç¤ºã€ä»£ç é‡æ„ï¼Œé™æ€ç±»å‹æ£€æŸ¥ï¼Œåœ¨ä»£ç ç¼–å†™é˜¶æ®µå‘ç°è¯­æ³•é”™è¯¯ã€‚[[ä¸ºä»€ä¹ˆè¦ç”¨TypeScript]]

### 1ã€å–„ç”¨ç±»å‹æ³¨é‡Š

 å½“é¼ æ ‡æ‚¬æµ®åœ¨ä½¿ç”¨åˆ°è¯¥ç±»å‹çš„åœ°æ–¹æ—¶ï¼Œç¼–è¾‘å™¨ä¼šæœ‰æ›´å¥½çš„æç¤º

 
 ```ts
/** å¥–å“ä¿¡æ¯ */
interface IAwardItem {  
	 gift_name: string;  
	 gift_pic: string;  
	 gift_description: string;  
	 gift_type: number; // å¥–åŠ±ç±»å‹,1:é»˜è®¤ç±»å‹, 2:ç¢ç‰‡ç±»å‹, 3:ç¥ç¦ç±»å‹  
	 splinter_have: number; // ç”¨æˆ·æŒæœ‰çš„ç¢ç‰‡ä¸ªæ•°, åªæœ‰gift_type=2æ—¶æœ‰æ•ˆ  
	 splinter_count: number; // ç¢ç‰‡ä¸Šé™, åªæœ‰gift_type=2æ—¶æœ‰æ•ˆ  
}
 ```
 

### 2ã€å–„ç”¨ *.d.ts å£°æ˜æ–‡ä»¶

`*.ts` æ–‡ä»¶ä¼šè·å– `*.d.ts` å£°æ˜æ–‡ä»¶ä¸­çš„ç±»å‹å®šä¹‰ã€‚åœ¨ `tsconfig.json` ä¸­é…ç½®å…¨å±€è‡ªå®šä¹‰ç±»å‹å£°æ˜æ–‡ä»¶ï¼Œåˆ™å£°æ˜æ–‡ä»¶ä¸­çš„ç±»å‹å®šä¹‰éƒ½èƒ½è¢«é¡¹ç›®ä¸­çš„ `*.ts` æ–‡ä»¶è·å–åˆ°ï¼Œä¸éœ€è¦ `import` å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚

```
common-types.d.ts
```

### 3ã€ç¬¬ä¸‰æ–¹åº“å£°æ˜æ–‡ä»¶

å½“åœ¨ `TypeScript` é¡¹ç›®ä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¼•ç”¨å®ƒçš„å£°æ˜æ–‡ä»¶ï¼Œæ‰èƒ½è·å¾—å¯¹åº”çš„ä»£ç è¡¥å…¨ã€æ¥å£æç¤ºç­‰åŠŸèƒ½ã€‚é’ˆå¯¹å¤šæ•°ç¬¬ä¸‰æ–¹åº“ï¼Œç¤¾åŒºå·²ç»å¸®æˆ‘ä»¬å®šä¹‰å¥½äº†å®ƒä»¬çš„å£°æ˜æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¸‹è½½ä¸‹æ¥ä½¿ç”¨ã€‚ä¸€èˆ¬æ¨èä½¿ç”¨ `@types` ç»Ÿä¸€ç®¡ç†ç¬¬ä¸‰æ–¹åº“çš„å£°æ˜æ–‡ä»¶ï¼Œ`@types` çš„ä½¿ç”¨æ–¹å¼å¾ˆç®€å•ï¼Œç›´æ¥ç”¨ `npm` æˆ– `yarn` å®‰è£…å¯¹åº”çš„å£°æ˜æ¨¡å—å³å¯ï¼š

```bash
yarn add @types/lodash
```

å¯åœ¨æ­¤æŸ¥æ‰¾ [ç¬¬ä¸‰æ–¹åº“å£°æ˜æ–‡ä»¶æŸ¥æ‰¾åœ°å€](https://www.typescriptlang.org/dt/search?search=)

### 4ã€è‡ªå®šä¹‰å£°æ˜æ–‡ä»¶

å½“ç¬¬ä¸‰æ–¹åº“æœªæä¾›å£°æ˜æ–‡ä»¶æ—¶ï¼Œç¼–è¾‘å™¨ä¼šæŠ¥é”™æ‰¾ä¸åˆ°åº“çš„å£°æ˜æ–‡ä»¶ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è§£å†³ç¼–è¾‘å™¨æŠ¥é”™ï¼š

```ts
declare module '@bilibili/h5-utils'  
declare module 'fontmin'  
declare module 'animejs/lib/anime.es.js'  
declare module '@bilibili/share-h5-next'  
declare module 'qrcode'  
declare module '@bilibili/sakura/lib/v-slidingdrawer'
```

### 5ã€å‘½åç©ºé—´ - Namespace

åœ¨ä¸åŒå‘½åç©ºé—´å†…å®šä¹‰ç±»å‹ï¼š

```ts
declare namespace Space01 {  
    interface ICourse {
		name: string;
		teacher: string;  
		rank: number;  
	}  
}  
declare namespace Space02 {  
    interface ICourse {  
		name: string;  
		teacher: string;  
		score: number;  
	}  
}  
const courseUS: Space01.ICourse = {  
	name: 'Art',  
	teacher: 'Tomas',  
	rank: 1,  
}  
const courseZH: Space02.ICourse = {  
	name: 'è‰ºæœ¯',  
	teacher: 'å°ç™½',  
	rank: 1,  
}
```

### 6ã€å–„ç”¨ JS æ–°ç‰¹æ€§ - å¯é€‰é“¾

å¯é€‰é“¾æ˜¯å…ˆæ£€æŸ¥å±æ€§æ˜¯å¦å­˜åœ¨ï¼ˆé `null` æˆ– `undefined`ï¼‰ï¼Œå­˜åœ¨å†è®¿é—®è¯¥å±æ€§çš„è¿ç®—ç¬¦ï¼Œä¸å­˜åœ¨è¿”å› `undefined`ã€‚

```ts
const age = user&&user.info&&user.info.getAge&&user.info.getAge()  
```

å¦åˆ™ç›´æ¥è®¿é—® `user.info.getAge()` å¾ˆå®¹æ˜“å‘½ä¸­ `Uncaught TypeError: Cannot read propertyâ€¦`ï¼Œä»¥å¯é€‰é“¾æ”¹å†™åï¼š

```ts
const list = user?.info?.getAge?.()
```

### 7ã€å–„ç”¨ JS æ–°ç‰¹æ€§ - ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦

å½“å·¦ä¾§çš„æ“ä½œæ•°ä¸º `null` æˆ–è€… `undefined` æ—¶ï¼Œè¿”å›å…¶å³ä¾§æ“ä½œæ•°ï¼Œå¦åˆ™è¿”å›å·¦ä¾§æ“ä½œæ•°ã€‚

```ts
const course = {  
  level: 0,  
}  
const level = course.level ?? 'æš‚æ— ç­‰çº§' // 0    
const level = course.rank ?? 'æš‚æ— æ’å' // æš‚æ— æ’å
const level = course.level || 'æš‚æ— ç­‰çº§' // æš‚æ— ç­‰çº§
```

ã€âš ï¸æ³¨ï¼šã€‘ä¸ `||` æ“ä½œç¬¦è¡¨ç°ä¸åŒï¼Œåˆ¤æ–­å·¦ä¾§æ“ä½œæ•°ä¸º `falsy` å³å–å³ä¾§æ“ä½œæ•°ã€‚

### 8ã€å–„ç”¨ä½¿ç”¨è®¿é—®é™å®šä¿®é¥°ç¬¦ - `private`ã€`protected` å’Œ `public`

TypeScript ä¸ºç±»å®šä¹‰æä¾›äº†ä¸‰ç§è®¿é—®ä¿®é¥°ç¬¦ï¼š

- `public` : å…¬æœ‰ç±»å‹ï¼Œåœ¨ç±»é‡Œé¢ã€å­ç±»ã€ç±»å¤–é¢éƒ½å¯ä»¥è®¿é—®åˆ°ï¼Œå¦‚æœä¸åŠ ä»»ä½•ä¿®é¥°ç¬¦ï¼Œé»˜è®¤ä¸ºæ­¤è®¿é—®çº§åˆ«ï¼Œé»˜è®¤ï¼›
- `protected` : ä¿æŠ¤ç±»å‹ï¼Œåœ¨ç±»é‡Œé¢ã€å­ç±»é‡Œé¢å¯ä»¥è®¿é—®ï¼Œåœ¨ç±»å¤–éƒ¨ä¸èƒ½è®¿é—®ï¼›
- `private` : ç§æœ‰ç±»å‹ï¼Œåªèƒ½åœ¨å½“å‰ç±»å†…éƒ¨è®¿é—®ã€‚
- `static`ï¼šå£°æ˜ä¸ºç±»çš„é™æ€å±æ€§å’Œæ–¹æ³•ã€‚
ã€âš ï¸æ³¨ï¼šã€‘è½¬ä¹‰åçš„ä»£ç åœ¨ `JS` ç¯å¢ƒä¸­å®Œå…¨å¯ä»¥æ­£ç¡®æ‰§è¡Œï¼Œä¸ä¼šå—é™ã€‚`TypeScript` ä»…ä»…æ˜¯æ‰©å±•äº†æ›´ä¸ºä¸¥æ ¼çš„è¯­æ³•ï¼Œå€ŸåŠ© LSP å’Œç¼–è¯‘å™¨æ¥å¸®åŠ©å¼€å‘è€…åœ¨å¼€å‘ç¯å¢ƒä¸­å°½æ—©å‘ç°å¹¶è§£å†³å­˜åœ¨æˆ–æ›¿åœ¨çš„é—®é¢˜ã€‚

### 9ã€å–„ç”¨ç±»å‹æ”¶çª„

ç±»å‹æ–­è¨€ã€ç±»å‹å®ˆå«ã€åŒé‡æ–­è¨€  
ç±»å‹å®ˆå«ï¼š

- typeofï¼šç”¨äºåˆ¤æ–­ `number`ï¼Œ`string`ï¼Œ`boolean` æˆ– `symbol` å››ç§åŸºæœ¬ç±»å‹ï¼›
- instanceofï¼šç”¨äºåˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦å±äºæŸä¸ªç±»
- inï¼šç”¨äºåˆ¤æ–­ä¸€ä¸ªå±æ€§/æ–¹æ³•æ˜¯å¦å±äºæŸä¸ªå¯¹è±¡

### 10ã€å¸¸é‡æšä¸¾ Vs æ™®é€šæšä¸¾

```ts
const enum Direction {  
	UP,  
	Right,  
	Down,  
	Left  
}
const directions = [ Direction.UP, Direction.Right ]
// ç¼–è¯‘ç»“æœ
const directions = [ 0, 1 ]
```

å¸¸é‡ (const) æšä¸¾ï¼Œä¸å…è®¸æœ‰è®¡ç®—å€¼ï¼Œä¸”åœ¨ç¼–è¯‘é˜¶æ®µè¢«ç§»é™¤ã€‚

```ts
enum Direction {  
	a = 1 + 1,  
	b = 'abc'.length,  
}
```

å…è®¸æœ‰è®¡ç®—å€¼ï¼Œä¸”åœ¨ç¼–è¯‘é˜¶æ®µä¸ä¼šè¢«ç§»é™¤ã€‚

### 11ã€é«˜çº§ç±»å‹

- ç±»å‹ç´¢å¼• `keyof`  
`keyof` ç±»ä¼¼äº `Object.keys`

```ts
interface TaskActionNames {  
 // ç­¾åˆ°  
 checkin: string;
 // è§‚çœ‹è§†é¢‘  
 watchVideo: string;
 // è§‚çœ‹é™å…å½±ç‰‡  
 watchMovie: string;
 // æŠ•ç¨¿/å‘è§†é¢‘  
 post: string;
}  
type TaskActionName = keyof TaskActionNames
// ç­‰æ•ˆäº
type TaskActionName = 'checkin'|'watchVideo'|'watchMovie'|'post'
```

- ç±»å‹çº¦æŸ `extend`  
å¸¸ä¸ `keyof` ä¸€èµ·ä½¿ç”¨

```ts
function getValue<T, K extends keyof T>(obj: T, key: K) {  
  return obj[key]  
}  
const obj = { a: 1 }  
const a = getValue(obj, 'a') // 1  
const b = getValue(obj, 'b') // ä¼ å…¥å¯¹è±¡æ— keyæ—¶IDEæŠ¥é”™
```

- ç±»å‹æ˜ å°„ `in`  
`in` å…³é”®è¯çš„ä½œç”¨ä¸»è¦æ˜¯åšç±»å‹çš„æ˜ å°„ï¼Œé…åˆ `keyof` éå†å·²æœ‰æ¥å£çš„ `key` æˆ–è€…æ˜¯éå†è”åˆç±»å‹ã€‚
- ts å†…ç½®ç±»å‹  
`Exclude`ï¼šæ’é™¤ç›¸åŒå±æ€§  
`Partial`ï¼šå¯é€‰å±æ€§  
`Required`ï¼šå¿…é¡»å±æ€§  
`Pick`ï¼šé€‰å–å±æ€§  
`Omit`ï¼šå‰”é™¤å±æ€§

## å‚è€ƒæ–‡çŒ®

[å¦‚ä½•åœ¨é¡¹ç›®ä¸­ç”¨å¥½ TypeScript ğŸ¤”](https:juejin.cn/post/7058868160706904078)
